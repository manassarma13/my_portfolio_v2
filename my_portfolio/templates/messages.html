{% extends 'base.html' %} 
{% block title %}Messages{% endblock %}

{% block content %}

<div class="container">
    <div class="well text-center">
        <div class="col md-12"></div>
        <div class="jumbotron-fluid p-3"> </div>
        <h2 class="h3"> Messages Section </h2>

        {% with flash_messages=get_flashed_messages() %}
            {% if messages %}

                {% for message in flash_messages %}

                <div class="alert alert-success alert-dismissible" id="to-remove" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="close" onclick="toDelete()">
                        <span aria-hidden="true">X</span>
                    </button>

                    {{ message }}
                </div>
            
                {% endfor %}
            {% endif %}
        {% endwith %}
        <table class="table table-hover table-dark">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>email</th>
                <th>Message</th>
                <th>Date&Time</th>
            </tr>

            {% for row in messages %}

            <tr>
                <td>{{row.id}}</td>
                <td>{{row.name}}</td>
                <td>{{row.email}}</td>
                <td>{{row.message}}</td>
                <td>{{row.date_added}}</td>

                <td>
                    <a href="/delete/{{row.id}}" class="btn btn-danger btn-xs" onclick="return confirm('Do You Want to Delete?')">Delete</a>
                </td>
            </tr>

            {% endfor %}
        </table>



    </div>
</div>

<script>
    const toDelete = () => {
        document.getElementById("to-remove").style.display = "none";
    }
</script>
{% endblock %}